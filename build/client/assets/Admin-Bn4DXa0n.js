import{w as y}from"./with-props-kkdrZNa-.js";import{a as t,w as j,o as e}from"./chunk-AYJ5UCUI-DkfX540F.js";import{a as S}from"./api-Bgppmrve.js";import{D as T}from"./DefaultLayout-BpWHhqv3.js";import{T as x,R as v}from"./TagInput-B6Yq99AU.js";function I({}){return[{title:"Mammon's Blog | Create post"},{name:"description",content:"Security Researcher and Enthusiast. I’m fairly low profile, but share useful info from time to time. Red Team wannabe"}]}const N=()=>{const[n,r]=t.useState(""),[i,l]=t.useState([]),[c,u]=t.useState([]),[d,m]=t.useState(""),[g,s]=t.useState(""),[a,p]=t.useState(!1),b=j(),h=async o=>{try{o.preventDefault(),p(!0);const w=(await S.post("/post",{title:n,content:d,tag:i,category:c})).data.data.posts.slice(-1)[0]._id;s("✅ Post created successfully!"),r(""),l([]),u([]),m(""),b(`/post/${w}`)}catch(f){console.error(f),s("❌ Failed to create post."),setTimeout(()=>s(""),3e3)}finally{p(!1)}};return e.jsx(T,{children:e.jsxs("form",{onSubmit:h,className:"space-y-6 p-6 bg-gray-800 text-white rounded-lg shadow-lg max-w-6xl mx-auto",children:[g&&e.jsx("div",{className:"p-2 rounded text-sm font-medium text-white bg-green-600",children:g}),e.jsx("h2",{className:"text-2xl font-bold",children:"Create new post"}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold",children:"Title"}),e.jsx("input",{name:"title",value:n,onChange:o=>r(o.target.value),className:"w-full px-4 py-2 border border-gray-600 rounded bg-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Post title",required:!0})]}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(x,{label:"Tag",tag:i,setTag:l}),e.jsx(x,{label:"Category",tag:c,setTag:u})]}),e.jsx(v,{content:d,setContent:m}),e.jsx("button",{type:"submit",className:`w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-200 ${a?"opacity-50 cursor-not-allowed":""}`,disabled:a,children:a?"Submitting...":"Submit"})]})})},$=y(N);export{$ as default,I as meta};

import{w as T}from"./with-props-kkdrZNa-.js";import{t as v,a as s,w as E,o as t}from"./chunk-AYJ5UCUI-DkfX540F.js";import{a as x}from"./api-Bgppmrve.js";import{D as N}from"./DefaultLayout-BpWHhqv3.js";import{T as b,R as P}from"./TagInput-B6Yq99AU.js";function I({}){return[{title:"Mammon's Blog | Update post"},{name:"description",content:"Security Researcher and Enthusiast. I’m fairly low profile, but share useful info from time to time. Red Team wannabe"}]}const $=()=>{const{id:a}=v(),[i,l]=s.useState(""),[u,c]=s.useState(""),[d,m]=s.useState([]),[p,g]=s.useState([]),[h,y]=s.useState(!0),[o,f]=s.useState(!1),[r,n]=s.useState(null),j=E();s.useEffect(()=>{x.get(`/post/${a}`).then(({data:e})=>{l(e.data.post.title),c(e.data.post.content),m(e.data.post.tag),g(e.data.post.category)}).catch(e=>{console.error("Error fetching posts:",e)}).finally(()=>{y(!1)})},[]);const w=async e=>{e.preventDefault(),f(!0);try{await x.patch(`/post/${a}`,{title:i,content:u,tag:d,category:p}),n({text:"✅ Post updated successfully!",isError:!1}),j(`/post/${a}`)}catch(S){console.error(S),n({text:"❌ Failed to update post.",isError:!0}),setTimeout(()=>n(null),3e3)}finally{f(!1)}};return t.jsx(N,{children:h?t.jsx("h1",{className:"page-title text-[26px] font-bold",children:"Loading..."}):t.jsxs("form",{onSubmit:w,className:"space-y-6 p-6 bg-gray-800 text-white rounded-lg shadow-lg max-w-6xl mx-auto",children:[r&&t.jsx("div",{className:`p-2 rounded text-sm font-medium text-white ${r.isError?"bg-red-600":"bg-green-600"}`,children:r.text}),t.jsxs("h2",{className:"text-2xl font-bold",children:["Update post - ID: ",a]}),t.jsxs("div",{children:[t.jsx("label",{className:"block mb-1 font-semibold",children:"Title"}),t.jsx("input",{name:"title",value:i,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-600 rounded bg-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Post title",required:!0})]}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(b,{label:"Tag",tag:d,setTag:m}),t.jsx(b,{label:"Category",tag:p,setTag:g})]}),t.jsx(P,{content:u,setContent:c}),t.jsx("button",{type:"submit",className:`w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-200 ${o?"opacity-50 cursor-not-allowed":""}`,disabled:o,children:o?"Submitting...":"Submit"})]})})},A=T($);export{A as default,I as meta};
